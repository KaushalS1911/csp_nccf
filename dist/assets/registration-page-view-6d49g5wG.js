import{a as H,r as l,J as p,d as J,e as i,m as y,f as K,K as S,p as Q,j as e,B as h,M as V,N as X,T as x,F as v,G as s,g as n,O as d,t as P,v as ee,w as _,x as f,z as te,o as re}from"./index-jKnsTm0t.js";const se=({vendor_category:o})=>{const C=H(),[c,O]=l.useState([]),[N,A]=l.useState([]),[B,R]=l.useState([]),[M,F]=l.useState(""),[j,u]=l.useState(!1),T=(t,r)=>{F(r),b.setValue("state",r)},L=["Partnership","Proprietary ","LLP","Public Limited","Other"],D=["Retail outlet","Mobile van"];l.useEffect(()=>{I()},[]);const m=c==null?void 0:c.find(t=>(t==null?void 0:t.state_name)===M);l.useEffect(()=>{m&&m.state_id&&($(m.state_id),z(m.state_id))},[m]);function I(){p.get("http://ec2-54-173-125-80.compute-1.amazonaws.com:8080/nccf/state").then(t=>{var r;O((r=t==null?void 0:t.data)==null?void 0:r.data)})}function $(t){p.get(`http://ec2-54-173-125-80.compute-1.amazonaws.com:8080/nccf/state/${t}/branch`).then(r=>{var a;A((a=r==null?void 0:r.data)==null?void 0:a.data)})}function z(t){p.get(`http://ec2-54-173-125-80.compute-1.amazonaws.com:8080/nccf/state/${t}/district`).then(r=>{var a;R((a=r==null?void 0:r.data)==null?void 0:a.data)})}const E=/^([0][1-9]|[1-2][0-9]|3[0-5])[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/,W=/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/,Z=["Dry","Wet","Both"],G=J().shape({name:i().required("Name is required"),confirm_password:i().min(6,"Minimum 6 character should be required").oneOf([y("password"),null],"Passwords must match").required("Confirm password is required"),password:i().min(6,"Minimum 6 character should be required").oneOf([y("password"),null],"Passwords must match").required("Confirm password is required"),contact_person:i().required("Contact Person is required"),gst_number:i().matches(E,"Invalid GST number format").required("GST number is required"),mil_dis_sub_roles:i().required("Sub category is required"),email:i().required("Email is required"),address:i().required("Address is required"),state:i().required("State is required"),district:i().required("District is required"),branch:i().required("Branch is required"),pan_number:i().matches(W,"Invalid PAN number format").required("PAN number is required"),procurement_area:i().required("Procurement area is required"),pincode:i().max(6,"Invalide pincode number").required("Pincode is required"),phone_number:i().max(10,"Enter valid contact number").required("Phone Number is required")}),k={name:"",category:"",milling_type:"",mil_dis_sub_roles:"",type_of_firm:"",contact_person:"",phone_number:"",email:"",password:"",confirm_password:"",address:"",state:"",district:"",procurement_area:"",branch:"",pincode:"",pan_number:"",gst_number:"",mode:""},b=K({resolver:re(G),defaultValues:k}),{reset:ie,control:g,register:ae,handleSubmit:U,formState:{errors:w}}=b,Y=U(async t=>{u(!0);const r={name:t.name||"",category:o||"",milling_type:t.milling_type||"",mil_dis_sub_roles:t.mil_dis_sub_roles||"",type_of_firm:t.type_of_firm||"",contact_person:t.contact_person||"",phone_number:t.phone_number||"",email:t.email||"",password:t.password||"",confirm_password:t.confirm_password||"",address:t.address||"",state:t.state||"",district:t.district||"",procurement_area:t.procurement_area||"",branch:t.branch||"",pincode:t.pincode||"",pan_number:t.pan_number||"",gst_number:t.gst_number||"",mode:""};p.post("http://ec2-54-173-125-80.compute-1.amazonaws.com:8080/nccf/csp",r).then(a=>{var q;((q=a==null?void 0:a.data)==null?void 0:q.status)=="201"&&(S("Register Successfully"),u(!1),C.push(Q.auth.jwt.login))}).catch(a=>{console.log(a),S("Something want wrong",{variant:"error"}),u(!1)})});return e.jsx(e.Fragment,{children:j?e.jsx(h,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:e.jsx(V,{sx:{color:"#fff",zIndex:t=>t.zIndex.drawer+1},open:j,onClick:()=>u(!1),children:e.jsx(X,{color:"inherit"})})}):e.jsxs(h,{p:5,className:"registerForm",sx:{backgroundColor:"white",borderRadius:"10px"},children:[e.jsx(x,{variant:"h5",gutterBottom:!0,className:"heading",children:"Basic Information"}),e.jsxs(v,{onSubmit:Y,methods:b,children:[e.jsxs(s,{container:!0,spacing:3,children:[e.jsx(s,{item:!0,xs:12,sm:6,md:3,children:e.jsx(n,{name:"name",label:o==="distributor"?"Distributor Name":o==="miller"||o==="miller_distributor"?"Milling Unit Name":"Society Name"})}),(o==="miller"||o==="miller_distributor")&&e.jsx(s,{item:!0,xs:12,sm:6,md:3,children:e.jsx(d,{name:"milling_type",type:"milling_type",label:"Milling Type",placeholder:"Choose Milling Type",fullWidth:!0,options:Z.map(t=>t),getOptionLabel:t=>t})}),o!=="society_cooperative"&&e.jsx(s,{item:!0,xs:12,sm:3,children:e.jsx(d,{name:"type_of_firm",label:"Type of Firm",placeholder:"Choose Your firm",fullWidth:!0,options:L.map(t=>t),getOptionLabel:t=>t})}),e.jsx(s,{item:!0,xs:12,sm:6,md:3,children:e.jsx(n,{name:"contact_person",label:"Contact Person"})}),e.jsx(s,{item:!0,xs:12,sm:6,md:3,children:e.jsx(n,{name:"phone_number",label:"Phone Number",type:"number"})}),e.jsx(s,{item:!0,xs:12,sm:6,md:3,children:e.jsx(n,{name:"email",label:"Email"})}),o==="distributor"&&e.jsxs(e.Fragment,{children:[e.jsx(s,{item:!0,xs:12,sm:6,md:3,children:e.jsx(n,{name:"area_of_Opration",label:"Area of Opration"})}),e.jsx(s,{item:!0,xs:12,sm:6,md:3,children:e.jsx(n,{name:"capacity",label:"Capacity /day (MT)"})}),e.jsx(s,{item:!0,xs:12,sm:3,children:e.jsx(d,{name:"mode",label:"Mode of Sale",placeholder:"Choose mode of sale",fullWidth:!0,options:D.map(t=>t),getOptionLabel:t=>t})})]}),e.jsx(s,{item:!0,xs:12,sm:6,md:3,children:e.jsx(n,{name:"pan_number",label:"PAN Number"})}),e.jsx(s,{item:!0,xs:12,sm:6,md:3,children:e.jsx(n,{name:"gst_number",label:"GST Number"})}),o==="society_cooperative"&&e.jsx(s,{item:!0,xs:12,children:e.jsx(P,{name:"mil_dis_sub_roles",control:g,render:({field:t})=>e.jsxs(h,{children:[e.jsxs(ee,{row:!0,"aria-label":"vendor",...t,children:[e.jsx(_,{value:"own_distribution_own_mill",control:e.jsx(f,{}),label:"Own both (Mill & Distribution)"}),e.jsx(_,{value:"own_distribution_rent_mill",control:e.jsx(f,{}),label:"Own Distribution (Rent Mill)"}),e.jsx(_,{value:"cooperative_rent_mill",control:e.jsx(f,{}),label:"Co-operative (Rent Mill)"})]}),w.mil_dis_sub_roles&&e.jsx(x,{color:"error",children:w.mil_dis_sub_roles.message})]})})})]}),e.jsx(x,{variant:"h5",gutterBottom:!0,className:"heading",mt:2,children:` ${o==="distributor"||o==="miller_distributor"||o==="miller"?"Address of Proposed Milling Unit Premises":"Address Information"}`}),e.jsxs(s,{container:!0,spacing:3,children:[e.jsx(s,{item:!0,xs:12,children:e.jsx(n,{name:"address",label:"Address"})}),e.jsx(s,{item:!0,xs:12,sm:4,children:e.jsx(P,{name:"state",control:g,render:({field:t})=>e.jsx(d,{...t,label:"State",placeholder:"Choose Your State",fullWidth:!0,options:c.map(r=>r==null?void 0:r.state_name),getOptionLabel:r=>r,onChange:(r,a)=>{t.onChange(a),T(r,a)}})})}),e.jsx(s,{item:!0,xs:12,sm:4,children:e.jsx(d,{name:"district",label:"District",placeholder:"Choose Your District",fullWidth:!0,options:B.map(t=>t==null?void 0:t.district),getOptionLabel:t=>t,disabled:!m})}),e.jsx(s,{item:!0,xs:12,sm:4,children:e.jsx(n,{name:"pincode",label:"Pin Code"})}),e.jsx(s,{item:!0,xs:12,sm:4,children:e.jsx(d,{name:"branch",label:"Branch",placeholder:"Choose Your Branch",fullWidth:!0,options:N.map(t=>t==null?void 0:t.branch_name),getOptionLabel:t=>t,disabled:!m})}),e.jsx(s,{item:!0,xs:12,sm:6,md:4,children:e.jsx(n,{name:"procurement_area",label:"Procurement area"})})]}),e.jsx(x,{variant:"h5",gutterBottom:!0,className:"heading",mt:2,children:"Password"}),e.jsxs(s,{container:!0,spacing:3,children:[e.jsx(s,{item:!0,xs:12,sm:6,md:4,children:e.jsx(n,{type:"password",name:"password",label:"Password"})}),e.jsx(s,{item:!0,xs:12,sm:6,md:4,children:e.jsx(n,{type:"password",name:"confirm_password",label:"Confirm Password"})})]}),e.jsx(h,{display:"flex",justifyContent:"flex-end",mt:3,children:e.jsx(te,{type:"submit",variant:"contained",color:"primary",children:"SUBMIT"})})]})]})})},oe=se;export{oe as R};
