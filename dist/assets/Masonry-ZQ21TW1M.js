import{N as J,O as K,U as Q,r as S,V as X,Y as ee,_ as g,bl as te,bm as se,j as P,Z as ne,a1 as oe,$ as T,bn as re,bo as $,a0 as F,bp as ae,bq as E}from"./index-ZfuUZpXM.js";function ie(e){return J("MuiMasonry",e)}K("MuiMasonry",["root"]);const le=["children","className","component","columns","spacing","defaultColumns","defaultHeight","defaultSpacing"],m=e=>Number(e.replace("px","")),ce={flexBasis:"100%",width:0,margin:0,padding:0},ue=e=>{const{classes:n}=e;return oe({root:["root"]},ie,n)},me=({ownerState:e,theme:n})=>{let r={width:"100%",display:"flex",flexFlow:"column wrap",alignContent:"flex-start",boxSizing:"border-box","& > *":{boxSizing:"border-box"}};const c={};if(e.isSSR){const s={},t=m(n.spacing(e.defaultSpacing));for(let o=1;o<=e.defaultColumns;o+=1)s[`&:nth-of-type(${e.defaultColumns}n+${o%e.defaultColumns})`]={order:o};return c.height=e.defaultHeight,c.margin=-(t/2),c["& > *"]=g({},r["& > *"],s,{margin:t/2,width:`calc(${(100/e.defaultColumns).toFixed(2)}% - ${t}px)`}),g({},r,c)}const a=T({values:e.spacing,breakpoints:n.breakpoints.values}),h=re(n);r=$(r,F({theme:n},a,s=>{let t;if(typeof s=="string"&&!Number.isNaN(Number(s))||typeof s=="number"){const o=Number(s);t=E(h,o)}else t=s;return g({margin:`calc(0px - (${t} / 2))`,"& > *":{margin:`calc(${t} / 2)`}},e.maxColumnHeight&&{height:typeof t=="number"?Math.ceil(e.maxColumnHeight+m(t)):`calc(${e.maxColumnHeight}px + ${t})`})}));const i=T({values:e.columns,breakpoints:n.breakpoints.values});return r=$(r,F({theme:n},i,s=>{const o=`${(100/Number(s)).toFixed(2)}%`,y=typeof a=="string"&&!Number.isNaN(Number(a))||typeof a=="number"?E(h,Number(a)):"0px";return{"& > *":{width:`calc(${o} - ${y})`}}})),typeof a=="object"&&(r=$(r,F({theme:n},a,(s,t)=>{if(t){const o=Number(s),y=Object.keys(i).pop(),u=E(h,o);return{"& > *":{width:`calc(${`${(100/(typeof i=="object"?i[t]||i[y]:i)).toFixed(2)}%`} - ${u})`}}}return null}))),r},de=Q("div",{name:"MuiMasonry",slot:"Root",overridesResolver:(e,n)=>[n.root]})(me),fe=S.forwardRef(function(n,r){const c=X({props:n,name:"MuiMasonry"}),{children:a,className:h,component:H="div",columns:i=4,spacing:R=1,defaultColumns:s,defaultHeight:t,defaultSpacing:o}=c,y=ee(c,le),u=S.useRef(),[k,w]=S.useState(),B=!k&&t&&s!==void 0&&o!==void 0,[U,_]=S.useState(B?s-1:0),O=g({},c,{spacing:R,columns:i,maxColumnHeight:k,defaultColumns:s,defaultHeight:t,defaultSpacing:o,isSSR:B}),W=ue(O),A=d=>{if(!u.current||!d||d.length===0)return;const l=u.current,x=u.current.firstChild,V=l.clientWidth,j=x.clientWidth;if(V===0||j===0)return;const z=window.getComputedStyle(x),I=m(z.marginLeft),G=m(z.marginRight),v=Math.round(V/(j+I+G)),C=new Array(v).fill(0);let b=!1;l.childNodes.forEach(f=>{if(f.nodeType!==Node.ELEMENT_NODE||f.dataset.class==="line-break"||b)return;const N=window.getComputedStyle(f),Y=m(N.marginTop),Z=m(N.marginBottom),L=m(N.height)?Math.ceil(m(N.height))+Y+Z:0;if(L===0){b=!0;return}for(let p=0;p<f.childNodes.length;p+=1){const M=f.childNodes[p];if(M.tagName==="IMG"&&M.clientHeight===0){b=!0;break}}if(!b){const p=C.indexOf(Math.min(...C));C[p]+=L;const M=p+1;f.style.order=M}}),b||ae.flushSync(()=>{w(Math.max(...C)),_(v>0?v-1:0)})};te(()=>{if(typeof ResizeObserver>"u")return;let d;const l=new ResizeObserver(()=>{d=requestAnimationFrame(A)});return u.current&&u.current.childNodes.forEach(x=>{l.observe(x)}),()=>{d&&window.cancelAnimationFrame(d),l&&l.disconnect()}},[i,R,a]);const q=se(r,u),D=new Array(U).fill("").map((d,l)=>P.jsx("span",{"data-class":"line-break",style:g({},ce,{order:l+1})},l));return P.jsxs(de,g({as:H,className:ne(W.root,h),ref:q,ownerState:O},y,{children:[a,D]}))}),ge=fe;export{ge as M};
