import{b9 as De,dp as qe,dq as Ee,a5 as l,$ as M,j as e,m as z,B as A,T as L,S as D,dr as E,bI as ue,d as Fe,e as T,r as m,f as J,bA as Q,F as K,bB as Z,bC as X,bN as Ie,d5 as Be,b$ as P,g as S,J as U,cV as We,bD as ee,v as _,o as Le,c as Y,bz as te,cJ as ze,cK as q,d7 as Ne,as as He,h as xe,i as v,bE as se,d8 as je,a3 as Me,I as $e,w as re,cb as ie,cc as ce,cd as de,c6 as me,bT as H,O as Ge,u as $,D as k,E as be,ax as ae,a as Ve,da as Ye,db as Je,az as Qe,C as oe,bY as Ke,R as Ze,ds as Xe,dt as Ue,cL as et,dd as tt,b_ as st,c8 as at,cM as ot,cN as nt,cO as lt,de as rt,df as it,dg as ct,dh as dt,ae as C,af as mt,du as ne,dv as ge,bM as ye,aq as ht,dw as pt,ba as ut,H as xt}from"./index-8oEAyshB.js";import{A as jt}from"./Alert-jybxvP-4.js";import{L as bt}from"./LoadingButton-Qy0ELVUm.js";import"./CircularProgress-XcS_0YSz.js";const gt=De("MuiBox",["root"]),yt=gt,ft=qe({defaultClassName:yt.root,generateClassName:Ee.generate}),F=ft;l.string,l.array,l.array,l.string;l.object;function I({title:t,total:o,sx:u,...i}){return M(),e.jsx(z,{sx:{display:"flex",alignItems:"center",p:3,...u},...i,children:e.jsxs(A,{sx:{flexGrow:1},children:[e.jsx(L,{variant:"subtitle2",children:t}),e.jsx(D,{direction:"row",alignItems:"center",sx:{mt:2,mb:1}}),e.jsx(L,{variant:"h3",children:E(o)})]})})}I.propTypes={chart:l.shape({colors:l.array,series:l.array.isRequired,options:l.object}),percent:l.number,sx:l.object,title:l.string,total:l.number};function fe({currentUser:t,open:o,onClose:u}){const{enqueueSnackbar:i}=ue(),h=Fe().shape({name:T().required("Name is required"),email:T().required("Email is required").email("Email must be a valid email address"),phoneNumber:T().required("Phone number is required"),address:T().required("Address is required"),country:T().required("Country is required"),company:T().required("Company is required"),state:T().required("State is required"),city:T().required("City is required"),role:T().required("Role is required")}),s=m.useMemo(()=>({name:(t==null?void 0:t.name)||"",email:(t==null?void 0:t.email)||"",phoneNumber:(t==null?void 0:t.phoneNumber)||"",address:(t==null?void 0:t.address)||"",country:(t==null?void 0:t.country)||"",state:(t==null?void 0:t.state)||"",city:(t==null?void 0:t.city)||"",zipCode:(t==null?void 0:t.zipCode)||"",status:t==null?void 0:t.status,company:(t==null?void 0:t.company)||"",role:(t==null?void 0:t.role)||""}),[t]),x=J({resolver:Le(h),defaultValues:s}),{reset:p,handleSubmit:a,formState:{isSubmitting:n}}=x,r=a(async c=>{try{await new Promise(j=>setTimeout(j,500)),p(),u(),i("Update success!"),console.info("DATA",c)}catch(j){console.error(j)}});return e.jsx(Q,{fullWidth:!0,maxWidth:!1,open:o,onClose:u,PaperProps:{sx:{maxWidth:720}},children:e.jsxs(K,{methods:x,onSubmit:r,children:[e.jsx(Z,{children:"Quick Update"}),e.jsxs(X,{children:[e.jsx(jt,{variant:"outlined",severity:"info",sx:{mb:3},children:"Account is waiting for confirmation"}),e.jsxs(A,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[e.jsx(Ie,{name:"status",label:"Status",children:Be.map(c=>e.jsx(P,{value:c.value,children:c.label},c.value))}),e.jsx(A,{sx:{display:{xs:"none",sm:"block"}}}),e.jsx(S,{name:"name",label:"Full Name"}),e.jsx(S,{name:"email",label:"Email Address"}),e.jsx(S,{name:"phoneNumber",label:"Phone Number"}),e.jsx(U,{name:"country",type:"country",label:"Country",placeholder:"Choose a country",fullWidth:!0,options:We.map(c=>c.label),getOptionLabel:c=>c}),e.jsx(S,{name:"state",label:"State/Region"}),e.jsx(S,{name:"city",label:"City"}),e.jsx(S,{name:"address",label:"Address"}),e.jsx(S,{name:"zipCode",label:"Zip/Code"}),e.jsx(S,{name:"company",label:"Company"}),e.jsx(S,{name:"role",label:"Role"})]})]}),e.jsxs(ee,{children:[e.jsx(_,{variant:"outlined",onClick:u,children:"Cancel"}),e.jsx(bt,{type:"submit",variant:"contained",loading:n,children:"Update"})]})]})})}fe.propTypes={open:l.bool,onClose:l.func,currentUser:l.object};function Ce({row:t,selected:o,onEditRow:u,onSelectRow:i,onDeleteRow:h}){const{commodity:s,created_at:x,quantity:p,index:a,nccf_order_status:n}=t,r=Y(),c=Y(),j=te();return e.jsxs(e.Fragment,{children:[e.jsxs(ze,{hover:!0,selected:o,children:[e.jsx(q,{sx:{whiteSpace:"nowrap"},children:a+1}),e.jsx(q,{sx:{whiteSpace:"nowrap"},children:s}),e.jsx(q,{sx:{whiteSpace:"nowrap"},children:p}),e.jsx(q,{sx:{whiteSpace:"nowrap"},children:Ne(x).format("DD/MM/YYYY")}),e.jsx(q,{children:e.jsx(He,{variant:"soft",color:n==="accepted"&&"success"||n==="placed"&&"warning"||n==="declined"&&"error"||"default",children:n})}),e.jsx(q,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:e.jsx(xe,{color:j.open?"inherit":"default",onClick:j.onOpen,children:e.jsx(v,{icon:"eva:more-vertical-fill"})})})]}),e.jsx(fe,{currentUser:t,open:c.value,onClose:c.onFalse}),e.jsxs(se,{open:j.open,onClose:j.onClose,arrow:"right-top",sx:{width:140},children:[e.jsxs(P,{onClick:()=>{r.onTrue(),j.onClose()},sx:{color:"error.main"},children:[e.jsx(v,{icon:"solar:trash-bin-trash-bold"}),"Delete"]}),e.jsxs(P,{onClick:()=>{u(),j.onClose()},children:[e.jsx(v,{icon:"solar:pen-bold"}),"Edit"]})]}),e.jsx(je,{open:r.value,onClose:r.onFalse,title:"Delete",content:"Are you sure want to delete?",action:e.jsx(_,{variant:"contained",color:"error",onClick:h,children:"Delete"})})]})}Ce.propTypes={onDeleteRow:l.func,onEditRow:l.func,onSelectRow:l.func,row:l.object,selected:l.bool};function we({filters:t,onFilters:o,commodityOptions:u,orderStatusOptions:i}){const h=te(),s=m.useCallback(a=>{o("name",a.target.value)},[o]),x=m.useCallback(a=>{o("commodity",typeof a.target.value=="string"?a.target.value.split(","):a.target.value)},[o]),p=m.useCallback(a=>{o("order_status",typeof a.target.value=="string"?a.target.value.split(","):a.target.value)},[o]);return e.jsxs(e.Fragment,{children:[e.jsx(D,{spacing:2,alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5,pr:2.5},children:e.jsxs(D,{direction:"row",alignItems:"center",spacing:2,flexGrow:1,sx:{width:1},children:[e.jsx(Me,{fullWidth:!0,value:t.name,onChange:s,placeholder:"Search...",InputProps:{startAdornment:e.jsx($e,{position:"start",children:e.jsx(v,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}),e.jsxs(re,{sx:{flexShrink:0,width:{xs:1,md:200}},children:[e.jsx(ie,{children:"Commodity"}),e.jsx(ce,{multiple:!0,value:t.commodity,onChange:x,input:e.jsx(de,{label:"Commodity"}),renderValue:a=>a.map(n=>n).join(", "),MenuProps:{PaperProps:{sx:{maxHeight:240}}},children:u.map(a=>e.jsxs(P,{value:a,children:[e.jsx(me,{disableRipple:!0,size:"small",checked:t.commodity.includes(a)}),a]},a))})]}),e.jsxs(re,{sx:{flexShrink:0,width:{xs:1,md:200}},children:[e.jsx(ie,{children:"Status"}),e.jsx(ce,{multiple:!0,value:t.order_status,onChange:p,input:e.jsx(de,{label:"Status"}),renderValue:a=>a.map(n=>n).join(", "),MenuProps:{PaperProps:{sx:{maxHeight:240}}},children:i.map(a=>e.jsxs(P,{value:a,children:[e.jsx(me,{disableRipple:!0,size:"small",checked:t.order_status.includes(a)}),a]},a))})]})]})}),e.jsxs(se,{open:h.open,onClose:h.onClose,arrow:"right-top",sx:{width:140},children:[e.jsxs(P,{onClick:()=>{h.onClose()},children:[e.jsx(v,{icon:"solar:printer-minimalistic-bold"}),"Print"]}),e.jsxs(P,{onClick:()=>{h.onClose()},children:[e.jsx(v,{icon:"solar:import-bold"}),"Import"]}),e.jsxs(P,{onClick:()=>{h.onClose()},children:[e.jsx(v,{icon:"solar:export-bold"}),"Export"]})]})]})}we.propTypes={filters:l.object,onFilters:l.func,roleOptions:l.array};function Se({filters:t,onFilters:o,onResetFilters:u,results:i,...h}){const s=m.useCallback(()=>{o("commodity","")},[o]),x=m.useCallback(()=>{o("status","all")},[o]),p=m.useCallback(n=>{const r=t.commodity.filter(c=>c!==n);o("commodity",r)},[t.commodity,o]),a=m.useCallback(n=>{const r=t.order_status.filter(c=>c!==n);o("order_status",r)},[t.order_status,o]);return e.jsxs(D,{spacing:1.5,...h,children:[e.jsxs(A,{sx:{typography:"body2"},children:[e.jsx("strong",{children:i}),e.jsx(A,{component:"span",sx:{color:"text.secondary",ml:.25},children:"results found"})]}),e.jsxs(D,{flexGrow:1,spacing:1,direction:"row",flexWrap:"wrap",alignItems:"center",children:[t.status!=="all"&&e.jsx(B,{label:"Status:",children:e.jsx(H,{size:"small",label:t.status,onDelete:x})}),!!t.commodity.length&&e.jsx(B,{label:"Commodity:",children:t.commodity.map(n=>e.jsx(H,{label:n,size:"small",onDelete:()=>p(n)},n))}),!!t.order_status.length&&e.jsx(B,{label:"Status:",children:t.order_status.map(n=>e.jsx(H,{label:n,size:"small",onDelete:()=>a(n)},n))}),!!t.name&&e.jsx(B,{label:"Keyword:",children:e.jsx(H,{label:t.name,size:"small",onDelete:s})}),e.jsx(_,{color:"error",onClick:u,startIcon:e.jsx(v,{icon:"solar:trash-bin-trash-bold"}),children:"Clear"})]})]})}Se.propTypes={filters:l.object,onFilters:l.func,onResetFilters:l.func,results:l.number};function B({label:t,children:o,sx:u,...i}){return e.jsxs(D,{component:Ge,variant:"outlined",spacing:1,direction:"row",sx:{p:1,borderRadius:1,overflow:"hidden",borderStyle:"dashed",...u},...i,children:[e.jsx(A,{component:"span",sx:{typography:"subtitle2"},children:t}),e.jsx(D,{spacing:1,direction:"row",flexWrap:"wrap",children:o})]})}B.propTypes={children:l.node,label:l.string,sx:l.object};function Ct({dialogOpen:t,setDialogOpen:o,editId:u}){const[i,h]=m.useState([]),[s,x]=m.useState([]),{vendor:p}=$();function a(){k.get(`http://ec2-54-173-125-80.compute-1.amazonaws.com:8080/nccf/csp/${p.csp_code}/orders`).then(d=>{var b;x((b=d.data)==null?void 0:b.data)})}m.useEffect(()=>{n(),a()},[]);function n(){k.get("http://ec2-54-173-125-80.compute-1.amazonaws.com:8080/nccf/commodity").then(d=>{var b;h((b=d.data)==null?void 0:b.data)})}const r={csp_code:p.csp_code,commodity:"",quantity:""},c=J({defaultValues:r}),{reset:j,handleSubmit:y,formState:{isSubmitting:R}}=c,O=async d=>{o(!1);const b={...d,csp_code:p.csp_code,mode:"test",status:"0"};try{const w=await k.post("http://ec2-54-173-125-80.compute-1.amazonaws.com:8080/nccf/csp/create_order",b);w.data.status=="201"?be("Order added successfully!"):w.data.status=="400"}catch(w){console.error("Order creation error:",w)}};return e.jsx(e.Fragment,{children:e.jsx(Q,{open:t,fullWidth:!0,maxWidth:"md",onClose:()=>o(!1),children:e.jsxs(F,{sx:{py:5,px:3},children:[e.jsx(Z,{children:"Add Order"}),e.jsxs(K,{methods:c,children:[e.jsxs(X,{maxWidth:"lg ",children:[e.jsx(F,{mb:2,mt:1,children:e.jsx(U,{name:"commodity",type:"commodity",label:"Commodity",placeholder:"Choose Commodity",fullWidth:!0,options:i.map(d=>d==null?void 0:d.commodity_name),getOptionLabel:d=>d})}),e.jsx(F,{mt:2,children:e.jsx(S,{name:"quantity",label:"Quantity",fullWidth:!0})})]}),e.jsxs(ee,{children:[e.jsx(_,{onClick:()=>o(!1),variant:"outlined",color:"inherit",children:"Cancel"}),e.jsx(_,{variant:"contained",onClick:y(O),children:"Add"})]})]})]})})})}function wt({editDialogOpen:t,setEditDialogOpen:o,editId:u}){const[i,h]=m.useState([]),[s,x]=m.useState([]),{vendor:p}=$();function a(){k.get(`http://ec2-54-173-125-80.compute-1.amazonaws.com:8080/nccf/csp/${p.csp_code}/orders`).then(d=>{var b;x((b=d.data)==null?void 0:b.data)})}m.useEffect(()=>{n(),a()},[]);function n(){k.get("http://ec2-54-173-125-80.compute-1.amazonaws.com:8080/nccf/commodity").then(d=>{var b;h((b=d.data)==null?void 0:b.data)})}const r={csp_code:p.csp_code,commodity:"",quantity:""},c=J({defaultValues:r}),{reset:j,handleSubmit:y,formState:{isSubmitting:R}}=c,O=async d=>{o(!1);const b={...d,csp_code:p.csp_code,mode:"test",status:"0"};try{const w=await k.post("http://ec2-54-173-125-80.compute-1.amazonaws.com:8080/nccf/csp/create_order",b);w.data.status=="201"?be("Order added successfully!"):w.data.status=="400"}catch(w){console.error("Order creation error:",w)}};return e.jsx(e.Fragment,{children:e.jsx(Q,{open:t,fullWidth:!0,maxWidth:"md",onClose:()=>o(!1),children:e.jsxs(F,{sx:{py:5,px:3},children:[e.jsx(Z,{children:"Edit Order"}),e.jsxs(K,{methods:c,children:[e.jsxs(X,{maxWidth:"lg ",children:[e.jsx(F,{mb:2,mt:1,children:e.jsx(U,{name:"commodity",type:"commodity",label:"Commodity",placeholder:"Choose Commodity",fullWidth:!0,options:i.map(d=>d==null?void 0:d.commodity_name),getOptionLabel:d=>d})}),e.jsx(F,{mt:2,children:e.jsx(S,{name:"quantity",label:"Quantity",fullWidth:!0})})]}),e.jsxs(ee,{children:[e.jsx(_,{onClick:()=>o(!1),variant:"outlined",color:"inherit",children:"Cancel"}),e.jsx(_,{variant:"contained",onClick:y(O),children:"Save"})]})]})]})})})}const St=[{id:"srNo",label:"Sr No",width:100},{id:"commodity",label:"Commodity",width:200},{id:"quantity",label:"Quantity",width:200},{id:"created_at",label:"Date",width:180},{id:"status",label:"Status",width:100},{id:"",width:88}],V={name:"",commodity:[],order_status:[],status:"all"};function vt({tableData:t}){const{enqueueSnackbar:o}=ue(),u=ae(),i=Ve(),h=Y(),s=Ye(),[x,p]=m.useState(!1),[a,n]=m.useState(!1),[r,c]=m.useState(V),[j,y]=m.useState(""),[R,O]=m.useState(t);m.useEffect(()=>{O(t)},[t]);const d=kt({inputData:R,comparator:Je(s.order,s.orderBy),filters:r}),b=d.slice(s.page*s.rowsPerPage,s.page*s.rowsPerPage+s.rowsPerPage),w=s.dense?56:76,le=!Qe(V,r),Re=!d.length&&le||!d.length,N=m.useCallback((g,f)=>{s.onResetPage(),c(G=>({...G,[g]:f}))},[s]),Te=m.useCallback(()=>{c(V)},[]),Pe=m.useCallback(g=>{const f=R.filter(G=>G.id!==g);o("Delete success!"),O(f),s.onUpdatePageDeleteRow(b.length)},[b.length,o,s,R]),_e=m.useCallback(()=>{const g=R.filter(f=>!s.selected.includes(f.id));o("Delete success!"),O(g),s.onUpdatePageDeleteRows({totalRowsInPage:b.length,totalRowsFiltered:d.length})},[d.length,b.length,o,s,R]),Oe=m.useCallback(g=>{n(!0)},[i]);m.useCallback((g,f)=>{N("status",f)},[N]);const Ae=m.useCallback(g=>{O(f=>[...f,g])},[o]);return e.jsxs(e.Fragment,{children:[e.jsxs(oe,{maxWidth:u.themeStretch?!1:"xxl",children:[e.jsx(Ke,{heading:"Orders",links:[{name:""}],action:e.jsx(_,{component:Ze,variant:"contained",startIcon:e.jsx(v,{icon:"mingcute:add-line"}),onClick:()=>{p(!0),Ae({id:String(Date.now()),srNo:String(R.length+1),commodity:"New Commodity",created_at:new Date().toISOString(),status:"placed"})},children:"Add Order"}),sx:{mb:{xs:3,md:5}}}),e.jsxs(z,{children:[e.jsx(we,{filters:r,onFilters:N,commodityOptions:Xe,orderStatusOptions:Ue}),le&&e.jsx(Se,{filters:r,onFilters:N,onResetFilters:Te,results:d.length,sx:{p:2.5,pt:0}}),e.jsxs(et,{sx:{position:"relative",overflow:"unset"},children:[e.jsx(tt,{dense:!0,numSelected:s.selected.length,rowCount:d.length,onSelectAllRows:g=>s.onSelectAllRows(g,d.map(f=>f.id)),action:e.jsx(st,{title:"Delete",children:e.jsx(xe,{color:"primary",onClick:h.onTrue,children:e.jsx(v,{icon:"solar:trash-bin-trash-bold"})})})}),e.jsx(at,{children:e.jsxs(ot,{size:s.dense?"small":"medium",sx:{minWidth:960},children:[e.jsx(nt,{order:s.order,orderBy:s.orderBy,headLabel:St,rowCount:d.length,numSelected:s.selected.length,onSort:s.onSort,onSelectAllRows:g=>s.onSelectAllRows(g,d.map(f=>f.id))}),e.jsxs(lt,{children:[d.slice(s.page*s.rowsPerPage,s.page*s.rowsPerPage+s.rowsPerPage).map((g,f)=>e.jsx(Ce,{row:{...g,index:f},selected:s.selected.includes(g.id),onSelectRow:()=>s.onSelectRow(g.id),onDeleteRow:()=>Pe(g.id),onEditRow:()=>Oe(g.id)},g.id)),e.jsx(rt,{height:w,emptyRows:it(s.page,s.rowsPerPage,R.length)}),e.jsx(ct,{isNotFound:Re})]})]})}),e.jsx(dt,{count:d.length,page:s.page,rowsPerPage:s.rowsPerPage,onPageChange:s.onChangePage,onRowsPerPageChange:s.onChangeRowsPerPage,dense:s.dense,onChangeDense:s.onChangeDense})]})]})]}),e.jsx(je,{open:h.value,onClose:h.onFalse,title:"Delete",content:"Are you sure you want to delete?",action:e.jsx(_,{variant:"contained",color:"error",onClick:()=>{_e(),h.onFalse()},children:"Delete"})}),e.jsx(Ct,{dialogOpen:x,setDialogOpen:p,editId:j}),e.jsx(wt,{editDialogOpen:a,setEditDialogOpen:n,editId:j})]})}function kt({inputData:t,comparator:o,filters:u}){const{name:i,status:h,commodity:s,order_status:x}=u,p=t.map((a,n)=>[a,n]);return p.sort((a,n)=>{const r=o(a[0],n[0]);return r!==0?r:a[1]-n[1]}),t=p.map(a=>a[0]),i&&(t=t.filter(a=>a.commodity.toLowerCase().includes(i.toLowerCase()))),h!=="all"&&(t=t.filter(a=>a.status===h)),s.length&&(t=t.filter(a=>s.includes(a.commodity))),x.length&&(t=t.filter(a=>x.includes(a.nccf_order_status))),t}function Rt({vendorCode:t}){const{vendor:o}=$(),u=ae(),[i,h]=m.useState([]),[s,x]=m.useState({});m.useEffect(()=>{o.csp_code&&(a(),p())},[o]);function p(){k.get(`http://ec2-54-173-125-80.compute-1.amazonaws.com:8080/nccf/csp/${o.csp_code}/orders_stats`).then(n=>{var r;x((r=n.data)==null?void 0:r.data[0])})}function a(){k.get(`http://ec2-54-173-125-80.compute-1.amazonaws.com:8080/nccf/csp/${o.csp_code}/orders`).then(n=>{var r;h((r=n.data)==null?void 0:r.data)})}return e.jsx(oe,{maxWidth:u.themeStretch?!1:"xl",children:e.jsxs(C,{container:!0,spacing:3,children:[e.jsx(C,{xs:12,md:3,children:e.jsx(I,{title:"Total Orders",total:(s==null?void 0:s.total_orders)||"0"})}),e.jsx(C,{xs:12,md:3,children:e.jsx(I,{title:"Orders Pending",total:(s==null?void 0:s.placed_orders)||"0"})}),e.jsx(C,{xs:12,md:3,children:e.jsx(I,{title:"Orders Accepted",total:(s==null?void 0:s.accepted_orders)||"0"})}),e.jsx(C,{xs:12,md:3,children:e.jsx(I,{title:"Orders Declined",total:(s==null?void 0:s.declined_orders)||"0"})}),e.jsx(C,{xs:12,lg:12,children:e.jsx(vt,{tableData:i})})]})})}function W({title:t,percent:o,total:u,chart:i,sx:h,...s}){const x=M(),{colors:p=[x.palette.primary.light,x.palette.primary.main],series:a,options:n}=i,r={colors:p.map(c=>c[1]),fill:{type:"gradient",gradient:{colorStops:[{offset:0,color:p[0],opacity:1},{offset:100,color:p[1],opacity:1}]}},chart:{sparkline:{enabled:!0}},plotOptions:{bar:{columnWidth:"68%",borderRadius:2}},tooltip:{x:{show:!1},y:{formatter:c=>E(c),title:{formatter:()=>""}},marker:{show:!1}},...n};return e.jsxs(z,{sx:{display:"flex",alignItems:"center",p:3,...h},...s,children:[e.jsxs(A,{sx:{flexGrow:1},children:[e.jsx(L,{variant:"subtitle2",children:t}),e.jsx(D,{direction:"row",alignItems:"center",sx:{mt:2,mb:1},children:e.jsxs(L,{component:"div",variant:"subtitle2",children:[o>0&&"+",mt(o)]})}),e.jsx(L,{variant:"h3",children:E(u)})]}),e.jsx(ne,{dir:"ltr",type:"bar",series:[{data:a}],options:r,width:60,height:36})]})}W.propTypes={chart:l.object,percent:l.number,sx:l.object,title:l.string,total:l.number};const he=400,pe=72,Tt=ht(ne)(({theme:t})=>({height:he,"& .apexcharts-canvas, .apexcharts-inner, svg, foreignObject":{height:"100% !important"},"& .apexcharts-legend":{height:pe,borderTop:`dashed 1px ${t.palette.divider}`,top:`calc(${he-pe}px) !important`}}));function ve({title:t,subheader:o,chart:u,...i}){const h=M(),{colors:s,series:x,options:p}=u,a=x.map(r=>r.value),n=ge({chart:{sparkline:{enabled:!0}},colors:s,labels:x.map(r=>r.label),stroke:{colors:[h.palette.background.paper]},legend:{offsetY:0,floating:!0,position:"bottom",horizontalAlign:"center"},tooltip:{fillSeriesColor:!1,y:{formatter:r=>E(r),title:{formatter:r=>`${r}`}}},plotOptions:{pie:{donut:{size:"90%",labels:{value:{formatter:r=>E(r)},total:{formatter:r=>{const c=r.globals.seriesTotals.reduce((j,y)=>j+y,0);return E(c)}}}}}},...p});return e.jsxs(z,{...i,children:[e.jsx(ye,{title:t,subheader:o,sx:{mb:5}}),e.jsx(Tt,{dir:"ltr",type:"donut",series:a,options:n,width:"100%",height:280})]})}ve.propTypes={chart:l.object,subheader:l.string,title:l.string};function ke({title:t,subheader:o,chart:u,...i}){const{labels:h,colors:s,series:x,options:p}=u,a=te(),[n,r]=m.useState("Week"),c=ge({chart:{stacked:!0},colors:s,stroke:{width:0},xaxis:{categories:n==="Week"&&h.week||n==="Month"&&h.month||h.year},tooltip:{y:{formatter:y=>pt(y)}},plotOptions:{bar:{borderRadius:n==="Week"&&8||n==="Month"&&6||10,columnWidth:"20%"}},...p}),j=m.useCallback(y=>{a.onClose(),r(y)},[a]);return e.jsxs(e.Fragment,{children:[e.jsxs(z,{...i,children:[e.jsx(ye,{title:t,subheader:o,action:e.jsxs(ut,{onClick:a.onOpen,sx:{pl:1,py:.5,pr:.5,borderRadius:1,typography:"subtitle2",bgcolor:"background.neutral"},children:[n,e.jsx(v,{width:16,icon:a.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill",sx:{ml:.5}})]})}),x.map(y=>e.jsx(A,{sx:{mt:3,mx:3},children:y.type===n&&e.jsx(ne,{dir:"ltr",type:"bar",series:y.data,options:c,width:"100%",height:375})},y.type))]}),e.jsx(se,{open:a.open,onClose:a.onClose,sx:{width:140},children:x.map(y=>e.jsx(P,{selected:y.type===n,onClick:()=>j(y.type),children:y.type},y.type))})]})}ke.propTypes={chart:l.object,subheader:l.string,title:l.string};l.bool,l.string,l.func,l.func,l.string,l.object,l.string;function Pt({vendorCode:t}){const{vendor:o}=$(),u=ae(),i=M(),[h,s]=m.useState([]),[x,p]=m.useState({}),a={week:["Mon","Tue","Web","Thu","Fri","Sat","Sun"],month:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],year:["2018","2019","2020","2021","2022"]};m.useEffect(()=>{o.csp_code&&(r(),n())},[o]);function n(){k.get(`http://ec2-54-173-125-80.compute-1.amazonaws.com:8080/nccf/csp/${o.csp_code}/orders_stats`).then(c=>{var j;p((j=c.data)==null?void 0:j.data[0])})}function r(){k.get(`http://ec2-54-173-125-80.compute-1.amazonaws.com:8080/nccf/csp/${o.csp_code}/orders`).then(c=>{var j;s((j=c.data)==null?void 0:j.data)})}return e.jsx(oe,{maxWidth:u.themeStretch?!1:"xl",children:e.jsxs(C,{container:!0,spacing:3,children:[e.jsx(C,{xs:12,md:3,children:e.jsx(W,{title:"Total Miller",total:4876,chart:{series:[8,9,31,8,16,37,8,33,46,31]}})}),e.jsx(C,{xs:12,md:3,children:e.jsx(W,{title:"Total Distributor",total:678,chart:{colors:[i.palette.warning.light,i.palette.warning.main],series:[8,9,31,8,16,37,8,33,46,31]}})}),e.jsx(C,{xs:12,md:3,children:e.jsx(W,{title:"Total Miller & Distributor",total:4876,chart:{colors:[i.palette.info.light,i.palette.info.main],series:[20,41,63,33,28,35,50,46,11,26]}})}),e.jsx(C,{xs:12,md:3,children:e.jsx(W,{title:"Total Society/Co-operative",total:678,chart:{colors:[i.palette.secondary.light,i.palette.secondary.main],series:[8,9,31,8,16,37,8,33,46,31]}})}),e.jsx(C,{xs:12,md:6,lg:4,children:e.jsx(ve,{title:"Current Orders",chart:{series:[{label:"Miller",value:12244},{label:"Distributor",value:53345},{label:"Miller + Distributor",value:44313},{label:"Society/Co-operative",value:78343}]}})}),e.jsx(C,{xs:12,md:6,lg:8,children:e.jsx(ke,{title:"Orders",chart:{labels:a,colors:[i.palette.primary.main,i.palette.error.main,i.palette.warning.main],series:[{type:"Week",data:[{name:"Bharat Daal",data:[20,34,48,65,37,48,9]},{name:"Bharat Aata",data:[10,34,13,26,27,28,18]},{name:"Bharat Rice",data:[10,14,13,16,17,18,28]}]},{type:"Month",data:[{name:"Bharat Daal",data:[10,34,13,56,77,88,99,77,45,12,43,34]},{name:"Bharat Aata",data:[10,34,13,56,77,88,99,77,45,12,43,34]},{name:"Bharat Rice",data:[10,34,13,56,77,88,99,77,45,12,43,34]}]},{type:"Year",data:[{name:"Bharat Daal",data:[10,34,13,56,77]},{name:"Bharat Aata",data:[10,34,13,56,77]},{name:"Bharat Rice",data:[10,34,13,56,77]}]}]}})})]})})}function qt(){m.useState(!0);const t=localStorage.getItem("login_type");return e.jsxs(e.Fragment,{children:[e.jsx(xt,{children:e.jsx("title",{children:" NCCF CSP Portal "})}),t==="other-login"?e.jsx(Rt,{}):e.jsx(Pt,{})]})}export{qt as default};
