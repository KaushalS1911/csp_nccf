import{a as G,r as l,J as u,d as I,e as i,m as j,f as U,K as f,p as Y,j as t,B as g,T as h,F as k,G as s,g as a,M as d,N as H,z as J,D as x,E as b,w as K,o as V}from"./index-V2omy5Zf.js";const Q=({vendor_category:n})=>{const w=G(),[c,q]=l.useState([]),[y,S]=l.useState([]),[P,C]=l.useState([]),[O,N]=l.useState(""),B=(e,r)=>{N(r),p.setValue("state",r)},R=["Partnership","Proprietary ","LLP","Public Limited","Other"],M=["Retail outlet","Mobile van"];l.useEffect(()=>{F()},[]);const m=c==null?void 0:c.find(e=>(e==null?void 0:e.state_name)===O);l.useEffect(()=>{m&&m.state_id&&(T(m.state_id),D(m.state_id))},[m]);function F(){u.get("http://ec2-54-173-125-80.compute-1.amazonaws.com:8080/nccf/state").then(e=>{var r;q((r=e==null?void 0:e.data)==null?void 0:r.data)})}function T(e){u.get(`http://ec2-54-173-125-80.compute-1.amazonaws.com:8080/nccf/state/${e}/branch`).then(r=>{var o;S((o=r==null?void 0:r.data)==null?void 0:o.data)})}function D(e){u.get(`http://ec2-54-173-125-80.compute-1.amazonaws.com:8080/nccf/state/${e}/district`).then(r=>{var o;C((o=r==null?void 0:r.data)==null?void 0:o.data)})}const L=["Dry","Wet","Both"],A=I().shape({address:i().required("Society is required"),contact_person:i().required("Contact is required"),confirm_password:i().oneOf([j("password"),null],"Passwords must match").required("Confirm password is required"),password:i().oneOf([j("password"),null],"Passwords must match").required("Confirm password is required"),district:i().required("District is required"),gst_number:i().required("GST Number is required"),name:i().required("Name is required"),email:i().required("Email is required"),state:i().required("State is required"),branch:i().required("Branch is required"),pan_number:i().required("Pan Number is required"),pincode:i().required("Pincode is required"),phone_number:i().max(10).required("Phone Number is required")}),E={name:"",category:"",milling_type:"",mil_dis_sub_roles:"",type_of_firm:"",contact_person:"",phone_number:"",email:"",password:"",confirm_password:"",address:"",state:"",district:"",procurement_area:"",branch:"",pincode:"",pan_number:"",gst_number:"",mode:""},p=U({resolver:V(A),defaultValues:E}),{reset:X,control:W,register:Z,handleSubmit:$,formState:{isSubmitting:v}}=p,z=$(async e=>{const r={name:e.name||"",category:n||"",milling_type:e.milling_type||"",mil_dis_sub_roles:e.mil_dis_sub_roles||"",type_of_firm:e.type_of_firm||"",contact_person:e.contact_person||"",phone_number:e.phone_number||"",email:e.email||"",password:e.password||"",confirm_password:e.confirm_password||"",address:e.address||"",state:e.state||"",district:e.district||"",procurement_area:e.procurement_area||"",branch:e.branch||"",pincode:e.pincode||"",pan_number:e.pan_number||"",gst_number:e.gst_number||"",mode:""};u.post("http://ec2-54-173-125-80.compute-1.amazonaws.com:8080/nccf/csp",r).then(o=>{var _;((_=o==null?void 0:o.data)==null?void 0:_.status)=="201"&&(f("Register Successfully"),w.push(Y.auth.jwt.login))}).catch(o=>{console.log(o),f("Invalid credentials",{variant:"error"})})});return t.jsxs(g,{p:5,className:"registerForm",sx:{backgroundColor:"white",borderRadius:"10px"},children:[t.jsx(h,{variant:"h5",gutterBottom:!0,className:"heading",children:"Basic Information"}),t.jsxs(k,{onSubmit:z,methods:p,children:[t.jsxs(s,{container:!0,spacing:3,children:[t.jsx(s,{item:!0,xs:12,sm:6,md:3,children:t.jsx(a,{name:"name",label:n==="distributor"?"Distributor Name":n==="miller"||n==="miller_distributor"?"Milling Unit Name":"Society Name"})}),(n==="miller"||n==="miller_distributor")&&t.jsx(s,{item:!0,xs:12,sm:6,md:3,children:t.jsx(d,{name:"milling_type",type:"milling_type",label:"Milling Type",placeholder:"Choose Milling Type",fullWidth:!0,options:L.map(e=>e),getOptionLabel:e=>e})}),n!=="society_cooperative"&&t.jsx(s,{item:!0,xs:12,sm:3,children:t.jsx(d,{name:"type_of_firm",label:"Type of Firm",placeholder:"Choose Your firm",fullWidth:!0,options:R.map(e=>e),getOptionLabel:e=>e})}),t.jsx(s,{item:!0,xs:12,sm:6,md:3,children:t.jsx(a,{name:"contact_person",label:"Contact Person"})}),t.jsx(s,{item:!0,xs:12,sm:6,md:3,children:t.jsx(a,{name:"phone_number",label:"Phone Number",type:"number"})}),t.jsx(s,{item:!0,xs:12,sm:6,md:3,children:t.jsx(a,{name:"email",label:"Email",type:"email"})}),n==="distributor"&&t.jsxs(t.Fragment,{children:[t.jsx(s,{item:!0,xs:12,sm:6,md:3,children:t.jsx(a,{name:"area_of_Opration",label:"Area of Opration"})}),t.jsx(s,{item:!0,xs:12,sm:6,md:3,children:t.jsx(a,{name:"capacity",label:"Capacity /day (MT)"})}),t.jsx(s,{item:!0,xs:12,sm:3,children:t.jsx(d,{name:"mode",label:"Mode of Sale",placeholder:"Choose mode of sale",fullWidth:!0,options:M.map(e=>e),getOptionLabel:e=>e})})]}),t.jsx(s,{item:!0,xs:12,sm:6,md:3,children:t.jsx(a,{name:"pan_number",label:"PAN Number"})}),t.jsx(s,{item:!0,xs:12,sm:6,md:3,children:t.jsx(a,{name:"gst_number",label:"GST Number"})}),n==="society_cooperative"&&t.jsx(s,{item:!0,xs:12,children:t.jsx(H,{name:"mil_dis_sub_roles",control:W,render:({field:e})=>t.jsxs(J,{row:!0,"aria-label":"vendor",...e,children:[t.jsx(x,{value:"own_distribution_own_mill",control:t.jsx(b,{}),label:"Own both (Mill & Distribution)"}),t.jsx(x,{value:"own_distribution_rent_mill",control:t.jsx(b,{}),label:"Own Distribution (Rent Mill)"}),t.jsx(x,{value:"cooperative_rent_mill",control:t.jsx(b,{}),label:"Co-operative (Rent Mill)"})]})})})]}),t.jsx(h,{variant:"h5",gutterBottom:!0,className:"heading",mt:2,children:` ${n==="distributor"||n==="miller_distributor"||n==="miller"?"Address of Proposed Milling Unit Premises":"Address Information"}`}),t.jsxs(s,{container:!0,spacing:3,children:[t.jsx(s,{item:!0,xs:12,children:t.jsx(a,{name:"address",label:"Address"})}),t.jsx(s,{item:!0,xs:12,sm:4,children:t.jsx(d,{name:"state",label:"State",placeholder:"Choose Your State",fullWidth:!0,options:c.map(e=>e==null?void 0:e.state_name),getOptionLabel:e=>e,onChange:B})}),t.jsx(s,{item:!0,xs:12,sm:4,children:t.jsx(d,{name:"district",label:"District",placeholder:"Choose Your District",fullWidth:!0,options:P.map(e=>e==null?void 0:e.district),getOptionLabel:e=>e,disabled:!m})}),t.jsx(s,{item:!0,xs:12,sm:4,children:t.jsx(a,{name:"pincode",label:"Pin Code"})}),t.jsx(s,{item:!0,xs:12,sm:4,children:t.jsx(d,{name:"branch",label:"Branch",placeholder:"Choose Your Branch",fullWidth:!0,options:y.map(e=>e==null?void 0:e.branch_name),getOptionLabel:e=>e,disabled:!m})}),t.jsx(s,{item:!0,xs:12,sm:6,md:4,children:t.jsx(a,{name:"procurement_area",label:"Procurement area"})})]}),t.jsx(h,{variant:"h5",gutterBottom:!0,className:"heading",mt:2,children:"Password"}),t.jsxs(s,{container:!0,spacing:3,children:[t.jsx(s,{item:!0,xs:12,sm:6,md:4,children:t.jsx(a,{type:"password",name:"password",label:"Password"})}),t.jsx(s,{item:!0,xs:12,sm:6,md:4,children:t.jsx(a,{type:"password",name:"confirm_password",label:"Confirm Password"})})]}),t.jsx(g,{display:"flex",justifyContent:"flex-end",mt:3,children:t.jsx(K,{type:"submit",variant:"contained",color:"primary",children:"SUBMIT"})})]})]})},te=Q;export{te as R};
