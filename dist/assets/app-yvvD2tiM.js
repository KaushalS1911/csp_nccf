import{_ as r,u as D,aK as P,r as i,K as m,j as t,C as F,am as n,cR as h,a8 as L,cS as E,cT as T,cU as B,H as V,cV as q}from"./index-n01YUS7m.js";import{U as z}from"./user-list-view-JsPom1ge.js";r.string,r.array,r.array,r.string;r.object;function H({vendorCode:l}){const{vendor:o}=D(),a=P(),[c,x]=i.useState({}),[f,p]=i.useState([]),[g,j]=i.useState(0);i.useEffect(()=>{o!=null&&o.csp_code&&(_(),S())},[g]);function b(){j(d=>d+1)}function S(){m.get(`http://ec2-54-173-125-80.compute-1.amazonaws.com:8080/nccf/csp/${o==null?void 0:o.csp_code}/orders_stats`).then(d=>{var u;x((u=d.data)==null?void 0:u.data[0])})}function _(){m.get(`http://ec2-54-173-125-80.compute-1.amazonaws.com:8080/nccf/csp/${o==null?void 0:o.csp_code}/orders`).then(d=>{var u;p((u=d.data)==null?void 0:u.data)})}return t.jsx(F,{maxWidth:a.themeStretch?!1:"xl",children:t.jsxs(n,{container:!0,spacing:3,children:[t.jsx(n,{xs:12,md:3,children:t.jsx(h,{title:"Orders Pending",total:(c==null?void 0:c.placed_orders)||"0",color:"info"})}),t.jsx(n,{xs:12,md:3,children:t.jsx(h,{title:"Orders Accepted",color:"warning",total:(c==null?void 0:c.accepted_orders)||"0"})}),t.jsx(n,{xs:12,md:3,children:t.jsx(h,{color:"error",title:"Orders Declined",total:(c==null?void 0:c.declined_orders)||"0"})}),t.jsx(n,{xs:12,md:3,children:t.jsx(h,{title:"Total Orders",total:(c==null?void 0:c.total_orders)||"0",color:"primary"})}),t.jsx(n,{xs:12,lg:12,children:t.jsx(z,{tableData:f,fetchAllOrdersDemo:b})})]})})}r.object,r.number,r.object,r.string,r.number;r.object,r.string,r.string;r.bool,r.string,r.func,r.func,r.string,r.object,r.string;function K({vendorCode:l}){D();const o=P();L(),i.useState([]);const[a,c]=i.useState([]),[x,f]=i.useState([]),[p,g]=i.useState([]);i.useEffect(()=>{j(),b()},[]),i.useEffect(()=>{const e=a==null?void 0:a.map((s,A)=>(s==null?void 0:s.category)!=="Distributor"?{label:E(s==null?void 0:s.category),value:s==null?void 0:s.count}:null).filter(s=>s!==null);g(e)},[a]);function j(){m.get("http://ec2-54-173-125-80.compute-1.amazonaws.com:8080/nccf/ho/csp/category-stats").then(e=>{const s=e.data.data,y=["miller","distributor","miller_distributor","society_cooperative"].map(C=>s.find(w=>w.category===C)).filter(Boolean);c(y)}).catch(e=>{console.error("Error fetching stats:",e)})}function b(){m.get("http://ec2-54-173-125-80.compute-1.amazonaws.com:8080/nccf/ho/csp/orders/stats").then(e=>{const s=e.data.data,y=["placed","accepted","declined"].map(C=>s.find(w=>w.nccf_order_status===C)).filter(Boolean);f(y)}).catch(e=>{console.error("Error fetching order stats:",e)})}const S=["placed","accepted","declined"],_=["primary","info","warning","error"],d=["secondary","brown1","brown","brown"],u=x.filter(e=>S.includes(e.nccf_order_status)),O=[];return u.map(e=>O.push({label:T(e==null?void 0:e.nccf_order_status),value:(e==null?void 0:e.order_count)||0})),t.jsx(F,{maxWidth:o.themeStretch?!1:"xl",children:t.jsxs(n,{container:!0,spacing:3,children:[a&&a.map((e,s)=>t.jsx(n,{xs:12,md:3,children:t.jsx(h,{title:E(e==null?void 0:e.category),total:(e==null?void 0:e.count)||0,color:_[s]})})),x&&u.map((e,s)=>t.jsx(n,{xs:12,md:4,children:t.jsx(h,{title:T(e==null?void 0:e.nccf_order_status),total:(e==null?void 0:e.order_count)||0,color:d[s],chart:{}})})),t.jsx(n,{xs:12,md:6,lg:4,children:p!==[]&&t.jsx(B,{title:"CSP distribution",chart:{colors:["#5DD095","#0D7566","#004B50","#C8FAD6"],series:p}})}),t.jsx(n,{xs:12,md:6,lg:4,children:p!==[]&&t.jsx(B,{title:"Total Orders",chart:{colors:["#6F4E37","#A67B5B","#FED8B1","#ECB176"],series:O}})})]})})}function v(){const{vendor:l}=D();return localStorage.getItem("login_type"),t.jsxs(t.Fragment,{children:[t.jsx(V,{children:t.jsx("title",{children:" NCCF CSP Portal "})}),(l==null?void 0:l.category)==="branch"?t.jsx(q,{}):(l==null?void 0:l.category)==="head_office"?t.jsx(K,{}):t.jsx(H,{})]})}export{v as default};
