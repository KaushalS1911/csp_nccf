import{a6 as i,cq as W,d as Z,e as g,r as h,f as J,j as e,bx as U,F as ee,by as ae,bz as oe,B as k,cG as se,cH as le,cg as D,g as j,K as te,c7 as ne,bA as ie,w as I,k as ce,o as de,c as z,bw as H,cI as re,bR as ue,bS as T,as as he,cJ as pe,cK as me,ay as M,bB as G,i as v,cL as xe,cM as Y,S,a4 as be,I as ge,cw as B,cN as je,U as we,u as Ce,E as fe,cO as ye,aD as ve,a as Re,cP as Se,aH as Pe,p as q,C as Te,cx as De,n as ke,cQ as Ae,a2 as Fe,cR as _e,cS as qe,bV as Ee,cT as Ie,cc as Le,h as Ne,bW as Be,bX as Ve,bY as ze,bZ as Oe,cU as We,cV as He,cW as Me,cX as Ge}from"./index-nB1sVaXe.js";import{A as Ye}from"./Alert-UXaqqJgN.js";const $e=[{value:"all",label:"All"},{value:"Aadhar",label:"Aadhar"},{value:"pan_number",label:"PAN"},{value:"gst_number",label:"GST"},{value:"certificates",label:"Certificates"},{value:"milling_unit_video",label:"Milling Unit Video"},{value:"milling_unit_photo",label:"Milling Unit Photo"}];i.string,i.array,i.array,i.string;i.object;function $({currentUser:a,open:t,onClose:d}){const{enqueueSnackbar:r}=W(),m=Z().shape({name:g().required("Name is required"),email:g().required("Email is required").email("Email must be a valid email address"),phoneNumber:g().required("Phone number is required"),address:g().required("Address is required"),country:g().required("Country is required"),company:g().required("Company is required"),state:g().required("State is required"),city:g().required("City is required"),role:g().required("Role is required")}),o=h.useMemo(()=>({name:(a==null?void 0:a.name)||"",email:(a==null?void 0:a.email)||"",phoneNumber:(a==null?void 0:a.phoneNumber)||"",address:(a==null?void 0:a.address)||"",country:(a==null?void 0:a.country)||"",state:(a==null?void 0:a.state)||"",city:(a==null?void 0:a.city)||"",zipCode:(a==null?void 0:a.zipCode)||"",status:a==null?void 0:a.status,company:(a==null?void 0:a.company)||"",role:(a==null?void 0:a.role)||""}),[a]),x=J({resolver:de(m),defaultValues:o}),{reset:n,handleSubmit:c,formState:{isSubmitting:p}}=x,w=c(async l=>{try{await new Promise(b=>setTimeout(b,500)),n(),d(),r("Update success!"),console.info("DATA",l)}catch(b){console.error(b)}});return e.jsx(U,{fullWidth:!0,maxWidth:!1,open:t,onClose:d,PaperProps:{sx:{maxWidth:720}},children:e.jsxs(ee,{methods:x,onSubmit:w,children:[e.jsx(ae,{children:"Quick Update"}),e.jsxs(oe,{children:[e.jsx(Ye,{variant:"outlined",severity:"info",sx:{mb:3},children:"Account is waiting for confirmation"}),e.jsxs(k,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[e.jsx(se,{name:"status",label:"Status",children:le.map(l=>e.jsx(D,{value:l.value,children:l.label},l.value))}),e.jsx(k,{sx:{display:{xs:"none",sm:"block"}}}),e.jsx(j,{name:"name",label:"Full Name"}),e.jsx(j,{name:"email",label:"Email Address"}),e.jsx(j,{name:"phoneNumber",label:"Phone Number"}),e.jsx(te,{name:"country",type:"country",label:"Country",placeholder:"Choose a country",fullWidth:!0,options:ne.map(l=>l.label),getOptionLabel:l=>l}),e.jsx(j,{name:"state",label:"State/Region"}),e.jsx(j,{name:"city",label:"City"}),e.jsx(j,{name:"address",label:"Address"}),e.jsx(j,{name:"zipCode",label:"Zip/Code"}),e.jsx(j,{name:"company",label:"Company"}),e.jsx(j,{name:"role",label:"Role"})]})]}),e.jsxs(ie,{children:[e.jsx(I,{variant:"outlined",onClick:d,children:"Cancel"}),e.jsx(ce,{type:"submit",variant:"contained",loading:p,children:"Update"})]})]})})}$.propTypes={open:i.bool,onClose:i.func,currentUser:i.object};function K({row:a,selected:t,onEditRow:d,onSelectRow:r,onViewRow:m,onDeleteRow:o,index:x}){const{doc_type:n,object_url:c,uploaded_on:p}=a;h.useState(!1);const[w,l]=h.useState([]),b=c.indexOf("/",8),R=`http://ec2-54-173-125-80.compute-1.amazonaws.com:8080/nccf/file${c.substring(b)}`,A=z(),f=z(),P=H();function F(C){l([C]),P.onClose(),y.onOpen(C)}const _=w.map(C=>({src:C})),y=re(_),L="completed";return e.jsxs(e.Fragment,{children:[e.jsxs(ue,{hover:!0,selected:t,children:[e.jsx(T,{sx:{whiteSpace:"nowrap"},children:x+1}),e.jsx(T,{children:e.jsx(he,{alt:c,src:R,sx:{mr:2,height:46,width:46,cursor:"pointer"},variant:"rounded",onClick:()=>F(R)})}),e.jsx(T,{sx:{whiteSpace:"nowrap"},children:pe(n)}),e.jsx(T,{sx:{whiteSpace:"nowrap"},children:me(p).format("DD/MM/YYYY")}),e.jsx(T,{children:e.jsx(M,{variant:"soft",color:"success",children:L})})]}),e.jsx($,{currentUser:a,open:f.value,onClose:f.onFalse}),e.jsx(G,{open:P.open,onClose:P.onClose,arrow:"right-top",sx:{width:140},children:e.jsxs(D,{onClick:()=>F(R),children:[e.jsx(v,{icon:"solar:eye-bold"}),"View"]})}),e.jsx(xe,{index:y.selected,slides:_,open:y.open,close:y.onClose,onGetCurrentIndex:C=>y.setSelected(C)}),e.jsx(Y,{open:A.value,onClose:A.onFalse,title:"Delete",content:"Are you sure want to delete?",action:e.jsx(I,{variant:"contained",color:"error",onClick:o,children:"Delete"})})]})}K.propTypes={onDeleteRow:i.func,onEditRow:i.func,onSelectRow:i.func,row:i.object,selected:i.bool};function Q({filters:a,onFilters:t,roleOptions:d}){const r=H(),m=h.useCallback(o=>{t("name",o.target.value)},[t]);return h.useCallback(o=>{t("role",typeof o.target.value=="string"?o.target.value.split(","):o.target.value)},[t]),e.jsxs(e.Fragment,{children:[e.jsx(S,{spacing:2,alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5,pr:2.5},children:e.jsx(S,{direction:"row",alignItems:"center",spacing:2,flexGrow:1,sx:{width:1},children:e.jsx(be,{fullWidth:!0,value:a.name,onChange:m,placeholder:"Search...",InputProps:{startAdornment:e.jsx(ge,{position:"start",children:e.jsx(v,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})})}),e.jsxs(G,{open:r.open,onClose:r.onClose,arrow:"right-top",sx:{width:140},children:[e.jsxs(D,{onClick:()=>{r.onClose()},children:[e.jsx(v,{icon:"solar:printer-minimalistic-bold"}),"Print"]}),e.jsxs(D,{onClick:()=>{r.onClose()},children:[e.jsx(v,{icon:"solar:import-bold"}),"Import"]}),e.jsxs(D,{onClick:()=>{r.onClose()},children:[e.jsx(v,{icon:"solar:export-bold"}),"Export"]})]})]})}Q.propTypes={filters:i.object,onFilters:i.func,roleOptions:i.array};function X({filters:a,onFilters:t,onResetFilters:d,results:r,...m}){const o=h.useCallback(()=>{t("name","")},[t]),x=h.useCallback(()=>{t("status","all")},[t]),n=h.useCallback(c=>{const p=a.role.filter(w=>w!==c);t("role",p)},[a.role,t]);return e.jsxs(S,{spacing:1.5,...m,children:[e.jsxs(k,{sx:{typography:"body2"},children:[e.jsx("strong",{children:r}),e.jsx(k,{component:"span",sx:{color:"text.secondary",ml:.25},children:"results found"})]}),e.jsxs(S,{flexGrow:1,spacing:1,direction:"row",flexWrap:"wrap",alignItems:"center",children:[a.status!=="all"&&e.jsx(E,{label:"Status:",children:e.jsx(B,{size:"small",label:je(a.status),onDelete:x})}),!!a.role.length&&e.jsx(E,{label:"Role:",children:a.role.map(c=>e.jsx(B,{label:c,size:"small",onDelete:()=>n(c)},c))}),!!a.name&&e.jsx(E,{label:"Keyword:",children:e.jsx(B,{label:a.name,size:"small",onDelete:o})}),e.jsx(I,{color:"error",onClick:d,startIcon:e.jsx(v,{icon:"solar:trash-bin-trash-bold"}),children:"Clear"})]})]})}X.propTypes={filters:i.object,onFilters:i.func,onResetFilters:i.func,results:i.number};function E({label:a,children:t,sx:d,...r}){return e.jsxs(S,{component:we,variant:"outlined",spacing:1,direction:"row",sx:{p:1,borderRadius:1,overflow:"hidden",borderStyle:"dashed",...d},...r,children:[e.jsx(k,{component:"span",sx:{typography:"subtitle2"},children:a}),e.jsx(S,{spacing:1,direction:"row",flexWrap:"wrap",children:t})]})}E.propTypes={children:i.node,label:i.string,sx:i.object};const Ke=[{id:"srNo",label:"Sr No",width:88},{id:"object_url",label:"Document Image",width:100},{id:"doc_type",label:"Document Type",width:100},{id:"uploaded_on",label:"Date",width:100},{id:"status",label:"Status",width:100}],V={name:"",role:[],status:"all"};function Qe(){const{vendor:a}=Ce(),{enqueueSnackbar:t}=W(),[d,r]=h.useState([]);h.useEffect(()=>{m()},[]);function m(){fe.get(`http://ec2-54-173-125-80.compute-1.amazonaws.com:8080/nccf/csp/${a==null?void 0:a.csp_code}/documents`).then(s=>{var u;return r((u=s==null?void 0:s.data)==null?void 0:u.data)}).catch(s=>console.error(s))}const o=ye(),x=ve(),n=Re(),c=z(),[p,w]=h.useState(V),l=Xe({inputData:d,comparator:Se(o.order,o.orderBy),filters:p}),b=l.slice(o.page*o.rowsPerPage,o.page*o.rowsPerPage+o.rowsPerPage),O=o.dense?56:76,R=!Pe(V,p),A=!l.length&&R||!l.length,f=h.useCallback((s,u)=>{o.onResetPage(),w(N=>({...N,[s]:u}))},[o]),P=h.useCallback(()=>{w(V)},[]),F=h.useCallback(s=>{const u=d.filter(N=>N.id!==s);t("Delete success!"),r(u),o.onUpdatePageDeleteRow(b.length)},[b.length,t,o,d]),_=h.useCallback(()=>{const s=d.filter(u=>!o.selected.includes(u.id));t("Delete success!"),r(s),o.onUpdatePageDeleteRows({totalRowsInPage:b.length,totalRowsFiltered:l.length})},[l.length,b.length,t,o,d]),y=h.useCallback(s=>{n.push(q.dashboard.user.edit(s))},[n]),L=h.useCallback(s=>{n.push(q.dashboard.document.document_view)},[n]),C=h.useCallback((s,u)=>{f("status",u)},[f]);return e.jsxs(e.Fragment,{children:[e.jsxs(Te,{maxWidth:x.themeStretch?!1:"xl",children:[e.jsx(De,{heading:"List",links:[{name:"Dashboard",href:q.dashboard.root},{name:"Document",href:q.dashboard.document},{name:"List"}],sx:{mb:{xs:3,md:5}}}),e.jsxs(ke,{children:[e.jsx(Ae,{value:p.status,onChange:C,sx:{px:2.5,boxShadow:s=>`inset 0 -2px 0 0 ${Fe(s.palette.grey[500],.08)}`},children:$e.map(s=>e.jsx(_e,{iconPosition:"end",value:s.value,label:s.label,icon:e.jsx(M,{variant:(s.value==="all"||s.value===p.status)&&"filled"||"soft",color:s.value==="Aadhar"&&"secondary"||s.value==="certificates"&&"warning"||s.value==="gst_number"&&"success"||s.value==="pan_number"&&"info"||s.value==="milling_unit_video"&&"error"||"default",children:s.value==="all"?d.length:d.filter(u=>u.doc_type===s.value).length})},s.value))}),e.jsx(Q,{filters:p,onFilters:f,roleOptions:qe}),R&&e.jsx(X,{filters:p,onFilters:f,onResetFilters:P,results:l.length,sx:{p:2.5,pt:0}}),e.jsxs(Ee,{sx:{position:"relative",overflow:"unset"},children:[e.jsx(Ie,{dense:!0,numSelected:o.selected.length,rowCount:l.length,onSelectAllRows:s=>o.onSelectAllRows(s,l.map(u=>u.id)),action:e.jsx(Le,{title:"Delete",children:e.jsx(Ne,{color:"primary",onClick:c.onTrue,children:e.jsx(v,{icon:"solar:trash-bin-trash-bold"})})})}),e.jsx(Be,{children:e.jsxs(Ve,{size:o.dense?"small":"medium",sx:{minWidth:960},children:[e.jsx(ze,{order:o.order,orderBy:o.orderBy,headLabel:Ke,rowCount:l.length,numSelected:o.selected.length,onSort:o.onSort,onSelectAllRows:s=>o.onSelectAllRows(s,l.map(u=>u.id))}),e.jsxs(Oe,{children:[l.slice(o.page*o.rowsPerPage,o.page*o.rowsPerPage+o.rowsPerPage).map((s,u)=>e.jsx(K,{index:u,row:s,selected:o.selected.includes(s.id),onSelectRow:()=>o.onSelectRow(s.id),onDeleteRow:()=>F(s.id),onViewRow:()=>L(s.id),onEditRow:()=>y(s.id)},s.id)),e.jsx(We,{height:O,emptyRows:He(o.page,o.rowsPerPage,l.length)}),e.jsx(Me,{notFound:A})]})]})})]}),e.jsx(Ge,{count:l.length,page:o.page,rowsPerPage:o.rowsPerPage,onPageChange:o.onChangePage,onRowsPerPageChange:o.onChangeRowsPerPage,dense:!0,onChangeDense:o.onChangeDense})]})]}),e.jsx(Y,{open:c.value,onClose:c.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsx("strong",{children:o.selected.length})," items?"]}),action:e.jsx(I,{variant:"contained",color:"error",onClick:()=>{_(),c.onFalse()},children:"Delete"})})]})}function Xe({inputData:a,comparator:t,filters:d}){const{name:r,status:m,role:o}=d,x=a.map((n,c)=>[n,c]);return x.sort((n,c)=>{const p=t(n[0],c[0]);return p!==0?p:n[1]-c[1]}),a=x.map(n=>n[0]),r&&(a=a.filter(n=>n.doc_type.toLowerCase().indexOf(r.toLowerCase())!==-1)),m!=="all"&&(a=a.filter(n=>n.doc_type===m)),o.length&&(a=a.filter(n=>o.includes(n.role))),a}const Ue=()=>e.jsx(e.Fragment,{children:e.jsx(Qe,{})});export{Ue as default};
