import{cn as V,u as H,r as s,K as z,c as Z,a as K,aF as q,aH as W,aJ as J,j as e,C as Q,cu as $,p as f,D as x,R as X,i as d,q as Y,dI as ee,dJ as te,dK as se,dL as k,dM as oe,S as ae,dN as le,dO as re,dP as ie,dQ as ne,aV as T,d0 as de,dR as ce,dS as ue,dT as he,dU as pe,dV as be,dW as g,H as me}from"./index-KjhAZpdY.js";const F=[{value:"published",label:"Published"},{value:"draft",label:"Draft"}],C={publish:[],stock:[]},fe={category:!1},xe=["category","actions"],j=[{name:"Nike Air Force 1 NDESTRUKT",category:"Accessories",coverUrl:"https://api-dev-minimal-v510.vercel.app/assets/images/m_product/product_1.jpg",createdAt:"2024-07-03T01:37:31.204Z",inventoryType:"out of stock",price:83.74,publish:"draft",id:"e99f09a7-dd88-49d5-b1c8-1daf80c2d7b1"},{name:"Foundations Matte Flip Flop",category:"Shose",coverUrl:"https://api-dev-minimal-v510.vercel.app/assets/images/m_product/product_2.jpg",createdAt:"2024-07-02T00:37:31.204Z",inventoryType:"in stock",price:97.14,publish:"published",id:"e99f09a7-dd88-49d5-b1c8-1daf80c2d7b2"},{name:"Nike Air Zoom Pegasus 37 A.I.R. Chaz Bear",category:"Apparel",coverUrl:"https://api-dev-minimal-v510.vercel.app/assets/images/m_product/product_3.jpg",createdAt:"2024-06-30T23:37:31.204Z",inventoryType:"low stock",price:68.71,publish:"published",id:"e99f09a7-dd88-49d5-b1c8-1daf80c2d7b3"},{name:"Boston Soft Footbed Sandal",category:"Apparel",coverUrl:"https://api-dev-minimal-v510.vercel.app/assets/images/m_product/product_5.jpg",createdAt:"2024-06-28T21:37:31.204Z",inventoryType:"low stock",price:52.17,publish:"published",id:"e99f09a7-dd88-49d5-b1c8-1daf80c2d7b5"}];function ge(){const{enqueueSnackbar:o}=V(),{vendor:l}=H(),[p,c]=s.useState([]);s.useEffect(()=>{l.csp_code&&r()},[l]);function r(){z.get(`http://ec2-54-173-125-80.compute-1.amazonaws.com:8080/nccf/csp/${l.csp_code}/orders`).then(t=>{var a;c((a=t.data)==null?void 0:a.data)})}const u=Z(),w=K(),O=localStorage.getItem("login_type"),P=q(),{products:je,productsLoading:D}=W(),[i,b]=s.useState([]),[h,y]=s.useState(C),[n,A]=s.useState([]),[I,N]=s.useState(fe);s.useEffect(()=>{j&&b(j)},[j]);const S=Ce({inputData:i,filters:h}),_=!J(C,h),v=s.useCallback((t,a)=>{y(m=>({...m,[t]:a}))},[]),E=s.useCallback(()=>{y(C)},[]),G=s.useCallback(t=>{const a=i.filter(m=>m.id!==t);o("Delete success!"),b(a)},[o,i]),L=s.useCallback(()=>{const t=i.filter(a=>!n.includes(a.id));o("Delete success!"),b(t)},[o,n,i]),M=s.useCallback(t=>{},[w]),B=s.useCallback(t=>{},[w]),R=[{field:"category",headerName:"Category",filterable:!1},{field:"name",headerName:"Product",flex:1,minWidth:360,hideable:!1,renderCell:t=>e.jsx(ce,{params:t})},{field:"createdAt",headerName:"Create at",width:160,renderCell:t=>e.jsx(ue,{params:t})},{field:"inventoryType",headerName:"Stock",width:160,type:"singleSelect",valueOptions:k,renderCell:t=>e.jsx(he,{params:t})},{field:"price",headerName:"Price",width:140,editable:!0,renderCell:t=>e.jsx(pe,{params:t})},{field:"publish",headerName:"Publish",width:110,type:"singleSelect",editable:!0,valueOptions:F,renderCell:t=>e.jsx(be,{params:t})},{type:"actions",field:"actions",headerName:" ",align:"right",headerAlign:"right",width:80,sortable:!1,filterable:!1,disableColumnMenu:!0,getActions:t=>[e.jsx(g,{showInMenu:!0,icon:e.jsx(d,{icon:"solar:eye-bold"}),label:"View",onClick:()=>B(t.row.id)}),e.jsx(g,{showInMenu:!0,icon:e.jsx(d,{icon:"solar:pen-bold"}),label:"Edit",onClick:()=>M(t.row.id)}),e.jsx(g,{showInMenu:!0,icon:e.jsx(d,{icon:"solar:trash-bin-trash-bold"}),label:"Delete",onClick:()=>{G(t.row.id)},sx:{color:"error.main"}})]}],U=()=>R.filter(t=>!xe.includes(t.field)).map(t=>t.field);return e.jsxs(e.Fragment,{children:[e.jsxs(Q,{maxWidth:P.themeStretch?!1:"lg",sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e.jsx($,{heading:"Orders",links:[{name:"Dashboard",href:f.dashboard.root},{name:"Branch",href:f.dashboard.product.root},{name:"Orders"}],action:O!=="head-office"&&e.jsx(x,{component:X,href:f.dashboard.product.new,variant:"contained",startIcon:e.jsx(d,{icon:"mingcute:add-line"}),children:"New Order"}),sx:{mb:{xs:3,md:5}}}),e.jsx(Y,{sx:{height:{xs:800,md:2},flexGrow:{md:1},display:{md:"flex"},flexDirection:{md:"column"}},children:e.jsx(ee,{checkboxSelection:!0,disableRowSelectionOnClick:!0,rows:S,columns:R,loading:D,getRowHeight:()=>"auto",pageSizeOptions:[5,10,25],initialState:{pagination:{paginationModel:{pageSize:10}}},onRowSelectionModelChange:t=>{A(t)},columnVisibilityModel:I,onColumnVisibilityModelChange:t=>N(t),slots:{toolbar:()=>e.jsxs(e.Fragment,{children:[e.jsxs(te,{children:[e.jsx(se,{filters:h,onFilters:v,stockOptions:k,publishOptions:F}),e.jsx(oe,{}),e.jsxs(ae,{spacing:1,flexGrow:1,direction:"row",alignItems:"center",justifyContent:"flex-end",children:[!!n.length&&e.jsxs(x,{size:"small",color:"error",startIcon:e.jsx(d,{icon:"solar:trash-bin-trash-bold"}),onClick:u.onTrue,children:["Delete (",n.length,")"]}),e.jsx(le,{}),e.jsx(re,{}),e.jsx(ie,{})]})]}),_&&e.jsx(ne,{filters:h,onFilters:v,onResetFilters:E,results:S.length,sx:{p:2.5,pt:0}})]}),noRowsOverlay:()=>e.jsx(T,{title:"No Data"}),noResultsOverlay:()=>e.jsx(T,{title:"No results found"})},slotProps:{columnsPanel:{getTogglableColumns:U}}})})]}),e.jsx(de,{open:u.value,onClose:u.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",n.length," "]})," items?"]}),action:e.jsx(x,{variant:"contained",color:"error",onClick:()=>{L(),u.onFalse()},children:"Delete"})})]})}function Ce({inputData:o,filters:l}){const{stock:p,publish:c}=l;return p.length&&(o=o.filter(r=>p.includes(r.inventoryType))),c.length&&(o=o.filter(r=>c.includes(r.publish))),o}function ye(){return e.jsxs(e.Fragment,{children:[e.jsx(me,{children:e.jsx("title",{children:" Dashboard: Product List"})}),e.jsx(ge,{})]})}export{ye as default};
