import{cg as z,s as W,a5 as $,a as G,c as J,r as d,dU as K,p as b,j as e,C as M,f as y,R as Q,e as f,cp as I,S as F,D as X,w as Y,a1 as Z,dV as ee,bq as P,d as R,H as te}from"./index-6b9YNlCU.js";import{s as A}from"./sumBy-DyDWZM9E.js";import{i as oe,d as se}from"./format-time-IxpVz2Ed.js";import{C as re}from"./confirm-dialog-_5sg9RTN.js";import{C as ae}from"./custom-breadcrumbs-KB-dcLue.js";import{u as ne,g as le,e as ie}from"./use-table-WJVbMyK_.js";import{b as ce,a as de,c as me,d as pe,e as ue}from"./table-pagination-custom-ahqG7Hxq.js";import{I as j,a as he,b as ge,c as xe}from"./invoice-details-view-A2GkH6Y2.js";import{C as k}from"./Card-1rxO-ujK.js";import{T as be,a as fe}from"./Tabs-moKXlJ2n.js";import{T as je,a as ve,b as we}from"./TableContainer-5PPQiGHx.js";import"./_baseIteratee-qZoVUYUb.js";import"./_baseToString-AAm-kJJE.js";import"./_baseSum-gu02AyRp.js";import"./DialogTitle-QI9cXB5a.js";import"./dialogTitleClasses-1OQJ_SK9.js";import"./DialogContent-9q1V7_Jw.js";import"./DialogActions-V1zGrLgw.js";import"./index-q81m-9gd.js";import"./empty-content-GLrj9nT1.js";import"./TablePagination-BBaJmBlc.js";import"./KeyboardArrowRight-KR5NzdLJ.js";import"./FirstPage-uNMM70pn.js";import"./Select-lumNJNbF.js";import"./Menu-F1nVpr7S.js";import"./Checkbox-J8dTnZci.js";import"./SwitchBase-tbu66qq5.js";import"./FormControlLabel-lzWdZQp4.js";import"./Switch-SI5HYcCt.js";import"./format-number-cH6inD4p.js";import"./CircularProgress-A1qORUTS.js";import"./FormControl-cYbgIL6F.js";import"./isMuiElement-LesLFYja.js";import"./InputLabel-PPNdZKj8.js";import"./FormLabel-Lx7iV62t.js";import"./DatePicker-gaRlO3Ea.js";import"./TextField-cpNo6eDL.js";import"./ListItem-Bq1KE9Qd.js";import"./ListItemSecondaryAction-R3kWWGiD.js";import"./Chip-JSfjLPw_.js";import"./custom-date-range-picker-xXSUQ-CO.js";import"./index.esm-GNBVmHKp.js";import"./form-provider-nQFnmWy0.js";import"./yup-lQjaurxX.js";import"./rhf-autocomplete-wTJsutQh.js";import"./upload-avatar-JBJ31_iw.js";import"./fade-DT3NHYqa.js";import"./file-thumbnail-so231KyZ.js";import"./index-cwqZrh9Q.js";import"./image-40GdGwYz.js";import"./FormGroup-665s5xv5.js";import"./editor-q7-HtS1N.js";import"./highlight-gnjvDdSa.js";import"./Slider-Iqglw49x.js";import"./visuallyHidden-DVicuktI.js";import"./RadioGroup-SsP2991e.js";import"./Autocomplete-B_8PEJCR.js";import"./Close-sDOtMgtS.js";import"./address-list-dialog-yvQFupu9.js";import"./LoadingButton-Dtx5aHAw.js";import"./Grid2-gzJFCzg3.js";const Ce=[{id:"invoiceNumber",label:"Customer"},{id:"createDate",label:"Create"},{id:"dueDate",label:"Due"},{id:"price",label:"Amount"},{id:"sent",label:"Sent",align:"center"},{id:"status",label:"Status"},{id:""}],B={name:"",service:[],status:"all",startDate:null,endDate:null};function Pe(){const{enqueueSnackbar:a}=z(),m=W(),S=$(),h=G(),t=ne({defaultOrderBy:"createDate"}),p=J(),[i,g]=d.useState(K),[n,x]=d.useState(B),r=oe(n.startDate,n.endDate),s=Re({inputData:i,comparator:le(t.order,t.orderBy),filters:n,dateError:r}),u=s.slice(t.page*t.rowsPerPage,t.page*t.rowsPerPage+t.rowsPerPage),L=t.dense?56:76,T=!!n.name||!!n.service.length||n.status!=="all"||!!n.startDate&&!!n.endDate,E=!s.length&&T||!s.length,c=o=>i.filter(l=>l.status===o).length,v=o=>A(i.filter(l=>l.status===o),"totalAmount"),w=o=>c(o)/i.length*100,O=[{value:"all",label:"All",color:"default",count:i.length},{value:"paid",label:"Paid",color:"success",count:c("paid")},{value:"pending",label:"Pending",color:"warning",count:c("pending")},{value:"overdue",label:"Overdue",color:"error",count:c("overdue")},{value:"draft",label:"Draft",color:"default",count:c("draft")}],C=d.useCallback((o,l)=>{t.onResetPage(),x(D=>({...D,[o]:l}))},[t]),N=d.useCallback(()=>{x(B)},[]),V=d.useCallback(o=>{const l=i.filter(D=>D.id!==o);a("Delete success!"),g(l),t.onUpdatePageDeleteRow(u.length)},[u.length,a,t,i]),H=d.useCallback(()=>{const o=i.filter(l=>!t.selected.includes(l.id));a("Delete success!"),g(o),t.onUpdatePageDeleteRows({totalRowsInPage:u.length,totalRowsFiltered:s.length})},[s.length,u.length,a,t,i]),_=d.useCallback(o=>{h.push(b.dashboard.invoice.edit(o))},[h]),U=d.useCallback(o=>{h.push(b.dashboard.invoice.details(o))},[h]),q=d.useCallback((o,l)=>{C("status",l)},[C]);return e.jsxs(e.Fragment,{children:[e.jsxs(M,{maxWidth:S.themeStretch?!1:"lg",children:[e.jsx(ae,{heading:"List",links:[{name:"Dashboard",href:b.dashboard.root},{name:"Invoice",href:b.dashboard.invoice.root},{name:"List"}],action:e.jsx(y,{component:Q,href:b.dashboard.invoice.new,variant:"contained",startIcon:e.jsx(f,{icon:"mingcute:add-line"}),children:"New Invoice"}),sx:{mb:{xs:3,md:5}}}),e.jsx(k,{sx:{mb:{xs:3,md:5}},children:e.jsx(I,{children:e.jsxs(F,{direction:"row",divider:e.jsx(X,{orientation:"vertical",flexItem:!0,sx:{borderStyle:"dashed"}}),sx:{py:2},children:[e.jsx(j,{title:"Total",total:i.length,percent:100,price:A(i,"totalAmount"),icon:"solar:bill-list-bold-duotone",color:m.palette.info.main}),e.jsx(j,{title:"Paid",total:c("paid"),percent:w("paid"),price:v("paid"),icon:"solar:file-check-bold-duotone",color:m.palette.success.main}),e.jsx(j,{title:"Pending",total:c("pending"),percent:w("pending"),price:v("pending"),icon:"solar:sort-by-time-bold-duotone",color:m.palette.warning.main}),e.jsx(j,{title:"Overdue",total:c("overdue"),percent:w("overdue"),price:v("overdue"),icon:"solar:bell-bing-bold-duotone",color:m.palette.error.main}),e.jsx(j,{title:"Draft",total:c("draft"),percent:w("draft"),price:v("draft"),icon:"solar:file-corrupted-bold-duotone",color:m.palette.text.secondary})]})})}),e.jsxs(k,{children:[e.jsx(be,{value:n.status,onChange:q,sx:{px:2.5,boxShadow:`inset 0 -2px 0 0 ${Y(m.palette.grey[500],.08)}`},children:O.map(o=>e.jsx(fe,{value:o.value,label:o.label,iconPosition:"end",icon:e.jsx(Z,{variant:(o.value==="all"||o.value===n.status)&&"filled"||"soft",color:o.color,children:o.count})},o.value))}),e.jsx(he,{filters:n,onFilters:C,dateError:r,serviceOptions:ee.map(o=>o.name)}),T&&e.jsx(ge,{filters:n,onFilters:C,onResetFilters:N,results:s.length,sx:{p:2.5,pt:0}}),e.jsxs(je,{sx:{position:"relative",overflow:"unset"},children:[e.jsx(ce,{dense:t.dense,numSelected:t.selected.length,rowCount:s.length,onSelectAllRows:o=>{t.onSelectAllRows(o,s.map(l=>l.id))},action:e.jsxs(F,{direction:"row",children:[e.jsx(P,{title:"Sent",children:e.jsx(R,{color:"primary",children:e.jsx(f,{icon:"iconamoon:send-fill"})})}),e.jsx(P,{title:"Download",children:e.jsx(R,{color:"primary",children:e.jsx(f,{icon:"eva:download-outline"})})}),e.jsx(P,{title:"Print",children:e.jsx(R,{color:"primary",children:e.jsx(f,{icon:"solar:printer-minimalistic-bold"})})}),e.jsx(P,{title:"Delete",children:e.jsx(R,{color:"primary",onClick:p.onTrue,children:e.jsx(f,{icon:"solar:trash-bin-trash-bold"})})})]})}),e.jsx(I,{children:e.jsxs(ve,{size:t.dense?"small":"medium",sx:{minWidth:800},children:[e.jsx(de,{order:t.order,orderBy:t.orderBy,headLabel:Ce,rowCount:s.length,numSelected:t.selected.length,onSort:t.onSort,onSelectAllRows:o=>t.onSelectAllRows(o,s.map(l=>l.id))}),e.jsxs(we,{children:[s.slice(t.page*t.rowsPerPage,t.page*t.rowsPerPage+t.rowsPerPage).map(o=>e.jsx(xe,{row:o,selected:t.selected.includes(o.id),onSelectRow:()=>t.onSelectRow(o.id),onViewRow:()=>U(o.id),onEditRow:()=>_(o.id),onDeleteRow:()=>V(o.id)},o.id)),e.jsx(me,{height:L,emptyRows:ie(t.page,t.rowsPerPage,s.length)}),e.jsx(pe,{notFound:E})]})]})})]}),e.jsx(ue,{count:s.length,page:t.page,rowsPerPage:t.rowsPerPage,onPageChange:t.onChangePage,onRowsPerPageChange:t.onChangeRowsPerPage,dense:t.dense,onChangeDense:t.onChangeDense})]})]}),e.jsx(re,{open:p.value,onClose:p.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",t.selected.length," "]})," items?"]}),action:e.jsx(y,{variant:"contained",color:"error",onClick:()=>{H(),p.onFalse()},children:"Delete"})})]})}function Re({inputData:a,comparator:m,filters:S,dateError:h}){const{name:t,status:p,service:i,startDate:g,endDate:n}=S,x=a.map((r,s)=>[r,s]);return x.sort((r,s)=>{const u=m(r[0],s[0]);return u!==0?u:r[1]-s[1]}),a=x.map(r=>r[0]),t&&(a=a.filter(r=>r.invoiceNumber.toLowerCase().indexOf(t.toLowerCase())!==-1||r.invoiceTo.name.toLowerCase().indexOf(t.toLowerCase())!==-1)),p!=="all"&&(a=a.filter(r=>r.status===p)),i.length&&(a=a.filter(r=>r.items.some(s=>i.includes(s.service)))),h||g&&n&&(a=a.filter(r=>se(r.createDate,g,n))),a}function kt(){return e.jsxs(e.Fragment,{children:[e.jsx(te,{children:e.jsx("title",{children:" Dashboard: Invoice List"})}),e.jsx(Pe,{})]})}export{kt as default};
