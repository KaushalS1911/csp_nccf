import{u as R,a as M,r as x,b as B,d as j,e as o,f as k,j as e,C as D,Q as H,B as l,n as T,q as V,s as E,F as G,G as t,g,t as p,v as b,w as i,x as n,T as d,y as I,z as N,S as z,L as O,R as W,p as $,o as A,H as J}from"./index-jKnsTm0t.js";import"./registration-page-view-6d49g5wG.js";function K(){const{login:c}=R();M();const[Q,y]=x.useState(""),C=B(),[u,w]=x.useState(""),[S,v]=x.useState("");C.get("returnTo");const q=j().shape({phone_number:o().required("Phone number is required"),password:o().required("Password is required"),category:o().required("Vendor category is required"),sub:o().required("Sub category is required")}),_=j().shape({phone_number:o().required("Phone number is required"),password:o().required("Password is required"),category:o().required("Vendor category is required")}),f={phone_number:"",password:"",category:"",sub:""},m=k({resolver:A(u==="society"?q:_),defaultValues:f}),{reset:P,control:h,register:X,handleSubmit:F,formState:{errors:a}}=m,L=F(async s=>{try{await(c==null?void 0:c({...s,category:u=="society"?S:s.category})),localStorage.setItem("login_type","other-login")}catch(r){console.error(r),P(),y(typeof r=="string"?r:r.message)}});return e.jsx(e.Fragment,{children:e.jsxs(D,{maxWidth:"sm",children:[e.jsx(H,{}),e.jsx(l,{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",children:e.jsx(T,{sx:{mt:5},children:e.jsxs(V,{sx:{pb:"70px !important",pt:"50px !important",px:"30px"},children:[e.jsx(l,{display:"flex",justifyContent:"center",mb:3,sx:{height:"130px",mb:"60px"},children:e.jsx("img",{src:E,alt:"BootstrapBrain Logo"})}),e.jsx(G,{onSubmit:L,methods:m,children:e.jsxs(t,{container:!0,spacing:2,children:[e.jsx(t,{item:!0,xs:12,children:e.jsx(g,{name:"phone_number",label:"Phone Number"})}),e.jsx(t,{item:!0,xs:12,sx:{my:"10px"},children:e.jsx(g,{name:"password",label:"Password",type:"password"})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(p,{name:"category",control:h,render:({field:s})=>e.jsxs(l,{children:[e.jsxs(b,{...s,row:!0,onChange:r=>{s.onChange(r),w(r.target.value)},children:[e.jsx(i,{value:"miller",control:e.jsx(n,{}),label:"Miller"}),e.jsx(i,{value:"distributor",control:e.jsx(n,{}),label:"Distributor"}),e.jsx(i,{value:"miller_distributor",control:e.jsx(n,{}),label:"Miller + Distributor"}),e.jsx(i,{value:"society",control:e.jsx(n,{}),label:"Society/Co-operative"})]}),a.category&&e.jsx(d,{color:"error",children:a.category.message})]})})}),u=="society"&&e.jsx(t,{item:!0,xs:12,children:e.jsx(p,{name:"sub",control:h,render:({field:s})=>e.jsxs(l,{children:[e.jsxs(b,{...s,row:!0,onChange:r=>{s.onChange(r),v(r.target.value)},children:[e.jsx(i,{value:"own_distribution_own_mill",control:e.jsx(n,{}),label:"Own both (Mill & Distribution)"}),e.jsx(i,{value:"own_distribution_rent_mill",control:e.jsx(n,{}),label:"Own Distribution (Rent Mill)"}),e.jsx(i,{value:"cooperative_rent_mill",control:e.jsx(n,{}),label:"Co-operative (Rent Mill)"})]}),a.sub&&e.jsx(d,{color:"error",children:a.sub.message})]})})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(I,{name:"remember_me",label:"Keep me logged in"})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(N,{variant:"contained",size:"large",color:"primary",fullWidth:!0,type:"submit",children:"Sign In"})}),e.jsx(t,{item:!0,xs:12,children:e.jsxs(z,{direction:"row",sx:{mt:2,justifyContent:"center"},spacing:1,children:[e.jsx(d,{variant:"subtitle2",children:"Become NCCF CSP?"}),e.jsx(O,{component:W,href:$.auth.jwt.register,variant:"subtitle2",children:"Create an account"})]})})]})})]})})})]})})}function ee(){return e.jsxs(e.Fragment,{children:[e.jsx(J,{children:e.jsx("title",{children:" NCCF CSP Portal: Login"})}),e.jsx(K,{})]})}export{ee as default};
